---
import Post from "../../layouts/Post.astro";
import { getEntry } from "astro:content";

const { params, redirect } = Astro;

const post = await getEntry("posts", params.slug!);

if (post === undefined || (import.meta.env.PROD && !post.data.publishedOn)) {
    return redirect("/404");
}

const { Content } = await post.render();
---

<Post frontmatter={post.data}>
    <Content />
</Post>
