---
import TagListing from "../../features/tags/TagListing.svelte";
import { noteStore } from "../../features/notes/store";
import { tagStore } from "../../features/tags/store";
import Root from "../../layouts/Root.astro";

const slug = Astro.params.slug!;

const tag = await tagStore.getSingle(slug);
const notes = await noteStore.getTagged({
	includeDrafts: import.meta.env.DEV,
	tags: [slug],
});

const title = `#${slug}`;
const description = tag?.data?.description;
---

<Root {title} {description} path={`/tags/${slug}`}>
	<TagListing tag={slug} {description} {notes} />
</Root>
