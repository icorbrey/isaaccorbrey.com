---
import CommentSectionShell from "components/comments/CommentSectionShell.astro";
import SupportFooter from "components/controls/SupportFooter.astro";
import type { NoteFrontmatter } from "stores/notes";
import Prose from "components/controls/Prose.astro";
import NoteHeader from "./NoteHeader.astro";
import NoteVideo from "./NoteVideo.astro";
import type { Tag } from "stores/tags";

type Props = {
  frontmatter: NoteFrontmatter;
  tagDescriptions: Tag[];
};

const { frontmatter, tagDescriptions } = Astro.props;

---

<article class="w-full">
  <div class="px-3">
    <NoteHeader
      publishedOn={frontmatter.publishedOn}
      readingTime={frontmatter.readingTime}
      title={frontmatter.title}
      tags={frontmatter.tags}
      {tagDescriptions}
    />
    {!!frontmatter.videoUrl && <NoteVideo url={frontmatter.videoUrl} />}
    <Prose>
      <slot />
    </Prose>
    <SupportFooter reviewers={frontmatter.reviewers} />
  </div>
  <!-- <TripleDots /> -->
  <CommentSectionShell uri={frontmatter.blueskyPostUri} />
</article>
